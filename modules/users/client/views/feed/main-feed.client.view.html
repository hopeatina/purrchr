<div class="" ng-controller="MainFeedController">
  <!--<md-button class="md-fab md-fab-bottom-right" aria-label="Add" style="position: fixed">-->
  <!--</md-button>-->
  <!--<joystick class="joystick" position="pos"></joystick>-->

  <!--<p>{{pos.x}}, {{pos.y}}</p>&lt;!&ndash;&ndash;&gt;-->

  <md-toolbar style="height: 50px;">
    <div layout="row" layout-align="space-around center">
      <!--<h4>{{stream.length}} Tweets</h4>-->
      <div flex="33" layout="row" layout-align="center center">
        <!--<i  class="material-icons md-24">access_time</i>-->
        <md-select class="sortby" ng-model="timeOptionSelected" placeholder="From">
          <md-option ng-repeat="option in timeSort" value="{{option.value}}">
            <md-button ng-click="updateTimePeriod(option.value)">{{option.name}}</md-button>
          </md-option>
        </md-select>
        <!--<h4> Since {{dataUpTo}}</h4>-->
      </div>
      <div ng-click="showHideUsers()" flex="33" aria-label="Users" layout="row" layout-align="center center">
        <i class="material-icons md-36">person_outline</i>
        <h4> {{recentPeeps.length}} </h4>
      </div>
      <div flex="33" layout="row" layout-align="center center">
        <md-select class="sortby" ng-model="sortOptionSelected" placeholder="Sort By">
          <md-option ng-repeat="option in sortOptions" value="{{option.value}}">
            {{option.name}}
          </md-option>
        </md-select>
      </div>
    </div>
  </md-toolbar>
  <div ng-hide="usersHidden" layout="row" class="topusers">
    <img ng-click="gotoAnchor(person.user.name)" ng-repeat="person in recentPeeps" style="width: 48px; height: 48px; "
         class="md-avatar-icon" ng-if="person"
         src="{{person.user.profile_image_url}}">
  </div>

  <md-tabs md-selected="selectedIndex" class="md-shadow-animated" md-dynamic-height md-swipe-content
           md-stretch-tabs="auto" md-center-tabs >
    <md-tab label="Feed" md-on-select="updateSortOptions()">
      <div layout="row" layout-align="center" class="signindiv">
        <md-button class="signinbutton" ng-if="QueueCount > 0" ng-click="updateFeed()">{{QueueCount}} New Tweets
        </md-button>
        <!--&lt;!&ndash;&ndash;&gt;<md-button ng-click="goPerUser()">Update</md-button>-->
      </div>
      <!--<div layout="row" layout-align="center">-->
      <!--<md-progress-circular md-mode="{{modes[4]}}" md-diameter="20"></md-progress-circular>-->
      <!--</div>-->
      <div ng-if="recentPeeps" ng-repeat="person in currentTweets | orderBy : sortOptionSelected"
           class="container" ng-controller="SingleTweetCtrl">
        <!---->
        <!--| 'orderBy : '-tweets.length"-->
        <md-card id="{{person.user.name}}" class=" usercard">
          <md-card-content class="">
            <div class="" layout="row" layout-align="space-around center">
              <div flex="33" layout="column" layout-align="center center" class="">
                <img style="width: 48px; height: 48px;" class="md-avatar-icon" ng-if="person"
                     src="{{person.user.profile_image_url}}">
              </div>
              <div flex="45" layout="row" layout-align="center center" class="">
                <div layout = "column">
                <span class="md-title">{{person.user.name}}</span>
                <span class="md-subhead">@{{person.user.screen_name}}</span>
                  </div>

                  <!--<md-button class="signinbutton" ng-click="follow()">{{followed}}-->
                  <!--</md-button>-->

              </div>

              <div flex="33" layout="column" layout-align="center center">
                <div>{{person.tweets.length}}</div>
                <div> Tweets</div>
              </div>
            </div>
            <div flex layout="row" layout-align="center center" class="">
              <div layout="column" layout-align="center center" flex="timeflex" ng-hide="tweetsCollapsed" timeline
                   data="person.tweets" options="timelineConfig"></div>
              <div flex="80" ng-if="person.tweets.length == 1">
                <md-card style="position: relative;margin-top: 10px;background: whitesmoke;" layout="row"
                         ng-repeat="ptweet in person.tweets">
                  <div ng-bind-html="getHtml(ptweet.name + ptweet.date)"></div>
                </md-card>
              </div>
            </div>
            <!--<div ng-if="person.tweets.length > 1" flex layout="row" layout-align="center center" class="">-->
            <!--&lt;!&ndash;class="animated rotateOutDownLeft"&ndash;&gt;-->
            <!--<md-button class="md-icon-button" aria-label="expandarrow" ng-click="toggleTweets()"><i-->
            <!--class="material-icons md-24">{{expandarrow}}</i></md-button>-->
            <!--</div>-->
            <div ng-show="tweetsCollapsed" layout="row" layout-align="center center">
              <div timeline data="person.tweets" options="timelineConfig"
                   style="width:auto;height: auto;"></div>
              <div layout="column" layout-align="space-around start">
                <div layout="row" ng-repeat="ptweet in person.tweets">
                  {{ptweet.name}}, {{ptweet.date}}
                </div>
              </div>
              <!--class="animated fadeInRight"-->
            </div>
          </md-card-content>
        </md-card>
      </div>
      <!--<div ng-if="stream" ng-repeat="tweet in stream"><img src="{{tweet.user.profile_image_url}}">{{tweet.user.name}},-->
      <!--@{{tweet.user.screen_name}},{{tweet.created_at}} : {{tweet.text}}-->
      <!--</div>-->
    </md-tab>
    <md-tab label="Links" md-on-select="updateSortOptions()">

      <div class="container">
        <md-card class="usercard" ng-repeat="link in currentLinks">
          <md-card-content>
            <div md-padding layout="column">

              <div layout="row" layout-align="space-around center" ng-repeat="user in link.userObj | orderBy : sortOptionSelected">
                <img style="width: 48px; height: 48px;" class="md-avatar-icon"
                     src="{{user.user.profile_image_url}}">
                <a class="wraplink" flex="40" href="{{link.url}}" target="_blank">{{link.url}}</a>
                <div>
                  {{user.values.retweets}}
                  Retweets
                </div>
                <div>
                  {{user.values.faves}}
                  Favorites
                </div>
              </div>
            </div>
          </md-card-content>


        </md-card>
      </div>
    </md-tab>
    <md-tab label="Media" md-on-select="updateSortOptions()">
    </md-tab>
  </md-tabs>
</div>
